//var app = angular.module('app', []);  app.controller('usuarioCtrl', function($scope) {  function archivo(e) {   var user = firebase.auth().currentUser;   var usuarioURL = '';   var file = e.target.files[0];    if (file) {      var storageRef = storage.ref('/usarioTocafe/'+file.name);     var subTarea = storageRef.put(file);     subTarea.on('state_changed', function(snapshot){     }, function(error){         console.log(error);     }, function(){         console.log('Subio a Firebase');                 var storageRef = storage.ref('/usarioTocafe/');         storageRef.child(file.name).getDownloadURL()         .then(function(url){           usuarioURL = url;           console.log(usuarioURL);           user.updateProfile({             photoURL: usuarioURL           });         });          window.location.reload(true);     });   }; }; document.getElementById('file').addEventListener('change', archivo);   $scope.actUsuario = function(){   var nombre = document.getElementById("nombre").value;   var email  = document.getElementById("email").value;   var clave  = document.getElementById("clave").value;   var user = firebase.auth().currentUser;   //$scope.imgUsuario();   user.updateProfile({     displayName: nombre     // photoURL:   }).then(function(){       user.updateEmail(email).then(function(){         user.updatePassword(clave).then(function(){               }).catch(function(error) {           // error           $scope.errAct = error.code;           $scope.$apply();         });       }).catch(function(error) {         // error       });   }).catch(function(error) {     //error   });   //document.getElementById("popup").visibility = hidden; // No funciona };   /*.: Logout de Usuario:.*/ $scope.salUsuario = function(){   var email= $scope.inp_email;   var clave= $scope.inp_clave;   firebase.auth().signOut()   .then(function(resultado){     window.location = 'login.html'   }); };   /*.: Escucha de Ingreso de Usuario :.*/ firebase.auth().onAuthStateChanged(function(user) {   if (user) {     document.getElementById("nombre").value = user.displayName;     document.getElementById("email").value = user.email;      $scope.usuarioImg = user.photoURL != null ? user.photoURL : "../comun/img/logo01.png";     $scope.$apply();    } else {     //window.location = 'login.html';   }; });  }); // Fin del scope  